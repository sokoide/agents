# Go Code Review Comments

Goコードのレビューで頻出する、より実務的で細かなスタイルとベストプラクティス。

## 1. エラー処理 (Errors)

* **Panic を避ける**: 通常のエラー処理に `panic` は使用しない。`error` を返す。
* **エラー文字列**: 小文字で始め、末尾に句読点を付けない（例: `fmt.Errorf("failed to open file")`）。
* **エラーチェック**: `_` で捨てない。必ず処理するか、上位に返す。
* **インデント**: エラーパスを深くせず、正常系を左側に保つ。

## 2. 命名 (Naming)

* **イニシャリズム**: URL, ID, HTTP などの頭字語は大文字小文字を維持（例: `ServeHTTP`, `appID`）。
* **パッケージ名**: `util`, `common`, `types` などの汎用的な名前を避け、パッケージの責務を明確にする。
* **変数名**: スコープが狭いほど短く（`i`, `r` など）、広いほど説明的に。

## 3. インターフェース (Interfaces)

* **利用側で定義**: インターフェースは、それを使用するパッケージ側で定義する。
* **実装側での定義禁止**: モックのためだけにインターフェースを事前定義しない。
* **返り値**: 具体的な型を返し、インターフェースを受け取る（Accept interfaces, return structs）。

## 4. コンテキスト (Context)

* **第一引数**: `context.Context` は常に関数の最初のパラメータとする。
* **構造体への保持禁止**: `Context` を構造体のフィールドに含めない。

## 5. テスト (Testing)

* **エラーメッセージ**: 失敗時に「何が」「どのような入力で」「何が得られ」「何が期待されたか」を明確に表示する。
* **Table-driven tests**: 複数のケースを構造体スライスで管理する手法を推奨。

## 6. その他

* **空スライス**: `t := []string{}` よりも `var t []string` を優先（シリアライズの意図がある場合を除く）。
* **同期的な関数**: 呼び出し側がゴルーチンの制御（並行実行するかどうか）を決定できるよう、関数自体は同期的に作成する。
